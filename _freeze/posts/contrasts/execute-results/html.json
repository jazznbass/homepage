{
  "hash": "adfaeeacef5d556fb590a682c4c9044d",
  "result": {
    "markdown": "---\ntitle: \"Treatment vs. effect contrasts\"\nauthor: \"Jürgen Wilbert\"\ndate: \"2023-05-17\"\nformat:\n  html:\n    page-layout: full\n    df-print: kable\n    toc: true\n    toc-location: right\n    self-contained: true\ncategories:\n  - regression\n  - statistics\n  - contrasts\n---\n\n\n### Hi Wolfgang and Michel, here is a simple example to show the differences between treatment and effect contrasts.\n\n# Example dataset\n\nCreate a random dataset with criteria `y`, predictors `x1`, `x2` and `gender`.\n\nAll variables are correlated.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nn <- 10000\ngender <- rep(0:1, each = n/2)\ny <- sample(0:10, n, replace = TRUE) + gender * sample(0:10, n, replace = TRUE)\nx1 <- sample(0:10, n, replace = TRUE) + gender * y\nx2 <- x1 + sample(0:10, n, replace = TRUE) + gender * y\ninter <- x1 > median(x1) & x2 > median(x2) & gender == 1\ny[inter] <- y[inter] + sample(0:10, sum(inter), replace = TRUE)\n\ndat <- data.frame(y = y, x1 = x1, x2 = x2, gender = gender)\n```\n:::\n\n\n# Descriptives\n\n\n::: {.cell}\n\n```{.r .cell-code}\npsych::corr.test(dat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:psych::corr.test(x = dat)\nCorrelation matrix \n          y   x1   x2 gender\ny      1.00 0.79 0.83   0.66\nx1     0.79 1.00 0.94   0.74\nx2     0.83 0.94 1.00   0.79\ngender 0.66 0.74 0.79   1.00\nSample Size \n[1] 10000\nProbability values (Entries above the diagonal are adjusted for multiple tests.) \n       y x1 x2 gender\ny      0  0  0      0\nx1     0  0  0      0\nx2     0  0  0      0\ngender 0  0  0      0\n\n To see confidence intervals of the correlations, print with the short=FALSE option\n```\n:::\n\n```{.r .cell-code}\npsych::describe(dat)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|       | vars|     n|    mean|        sd| median|   trimmed|     mad| min| max| range|      skew|   kurtosis|        se|\n|:------|----:|-----:|-------:|---------:|------:|---------:|-------:|---:|---:|-----:|---------:|----------:|---------:|\n|y      |    1| 10000|  9.5326|  6.768879|    8.0|  9.012750|  7.4130|   0|  30|    30| 0.6222269| -0.5002773| 0.0676888|\n|x1     |    2| 10000| 10.0063|  6.672279|    9.0|  9.585875|  7.4130|   0|  30|    30| 0.5162774| -0.5350028| 0.0667228|\n|x2     |    3| 10000| 19.9998| 12.575874|   16.0| 19.046000| 11.8608|   0|  58|    58| 0.5910003| -0.6639372| 0.1257587|\n|gender |    4| 10000|  0.5000|  0.500025|    0.5|  0.500000|  0.7413|   0|   1|     1| 0.0000000| -2.0002000| 0.0050003|\n\n</div>\n:::\n:::\n\n\n# Contrasts\n\nThe left part of the table is with gender as treatment contrast (0 vs. 1) and the right part with gender as effect contrast (-1 vs. 1)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Gender has values 0 vs. 1 (treatment contrast)\nfit1 <- lm(y ~ gender * x1 * x2, data = dat)\n\n# Gender hast -1 vs. 1 (effect contrast)\ndat$gender <- car::recode(dat$gender, \"0 = -1; 1 = 1\")\n\nfit2 <- lm(y ~ gender * x1 * x2, data = dat)\n\nsjPlot::tab_model(fit1, fit2, show.se = TRUE, show.ci = FALSE, col.order = c(\"est\", \"se\", \"std.est\", \"p\"), digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; \">&nbsp;</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">y</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">y</th>\n</tr>\n<tr>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; \">Predictors</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">std. Error</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">p</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">std. Error</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7\">p</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">5.1849</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.1880</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.7110</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.1882</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">gender</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;11.7920</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.3764</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;5.8960</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.1882</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0226</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0420</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.590</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.2945</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0259</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0066</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0239</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.781</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.2983</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0144</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">gender × x1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.5438</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0519</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.2719</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0259</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">gender × x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.6098</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0288</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.3049</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0144</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x1 × x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0026</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0036</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.479</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0072</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0018</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(gender × x1) × x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0093</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0037</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.011</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0047</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0018</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>0.011</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">10000</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">10000</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.747 / 0.747</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.747 / 0.747</td>\n</tr>\n\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}