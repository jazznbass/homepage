{
  "hash": "79e8994ac81442a34150304032218e06",
  "result": {
    "markdown": "---\ntitle: \"Treatment vs. effect contrasts\"\nauthor: \"Jürgen Wilbert\"\nabstract: Here is a simple example to show the differences between treatment and effect contrasts.\ndate: 2023/05/17\nformat:\n  html:\n    page-layout: full\n    df-print: kable\n    toc: true\n    toc-location: right\n    self-contained: true\ncategories:\n  - regression\n  - statistics\n  - contrasts\n---\n\n\n# Example dataset\n\nCreate a random dataset with criteria `y`, predictors `x1`, `x2` and `gender`.\n\n- y and gender are correlated\n- y and x1 are correlated ***only if gender is 1***\n- y and x1 are correlated ***only if gender is 1***\n- x1 and x2 are correlated\n- x1 and x2 have an interaction effect on y ***only if gender is 1***\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nn <- 2000\ngender <- rep(0:1, each = n/2)\ny <- sample(0:10, n, replace = TRUE) + gender * sample(0:10, n, replace = TRUE)\nx1 <- sample(0:10, n, replace = TRUE) + gender * y\nx2 <- x1 + sample(0:10, n, replace = TRUE) + gender * y\ny <- y + (x1 > median(x1) & x2 > median(x2) & gender == 1) * sample(0:10, n, replace = TRUE) * 2\n\ndat <- data.frame(y = y, x1 = x1, x2 = x2, gender = gender)\n```\n:::\n\n\n# Descriptives\n\n\n::: {.cell}\n\n```{.r .cell-code}\npsych::corr.test(dat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:psych::corr.test(x = dat)\nCorrelation matrix \n          y   x1   x2 gender\ny      1.00 0.79 0.82   0.68\nx1     0.79 1.00 0.95   0.74\nx2     0.82 0.95 1.00   0.79\ngender 0.68 0.74 0.79   1.00\nSample Size \n[1] 2000\nProbability values (Entries above the diagonal are adjusted for multiple tests.) \n       y x1 x2 gender\ny      0  0  0      0\nx1     0  0  0      0\nx2     0  0  0      0\ngender 0  0  0      0\n\n To see confidence intervals of the correlations, print with the short=FALSE option\n```\n:::\n\n```{.r .cell-code}\npsych::describe(dat)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|       | vars|    n|    mean|        sd| median|  trimmed|     mad| min| max| range|      skew|   kurtosis|        se|\n|:------|----:|----:|-------:|---------:|------:|--------:|-------:|---:|---:|-----:|---------:|----------:|---------:|\n|y      |    1| 2000| 11.6735|  9.829965|    8.0| 10.58375|  7.4130|   0|  40|    40| 0.8543788| -0.4209326| 0.2198047|\n|x1     |    2| 2000| 10.0920|  6.802549|    9.0|  9.67625|  7.4130|   0|  30|    30| 0.5169160| -0.5958746| 0.1521096|\n|x2     |    3| 2000| 20.2970| 12.883508|   17.0| 19.30562| 13.3434|   0|  58|    58| 0.6054280| -0.6904413| 0.2880840|\n|gender |    4| 2000|  0.5000|  0.500125|    0.5|  0.50000|  0.7413|   0|   1|     1| 0.0000000| -2.0009998| 0.0111831|\n\n</div>\n:::\n:::\n\n\n# Contrasts\n\nThe left part of the table is with gender as treatment contrast (0 vs. 1) and the right part with gender as effect contrast (-1 vs. 1)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Gender has values 0 vs. 1 (treatment contrast)\nfit1 <- lm(y ~ gender * x1 * x2, data = dat)\n\n# Gender hast -1 vs. 1 (effect contrast)\ndat$gender <- car::recode(dat$gender, \"0 = -1; 1 = 1\")\n\nfit2 <- lm(y ~ gender * x1 * x2, data = dat)\n\nsjPlot::tab_model(fit1, fit2, show.se = TRUE, show.ci = FALSE, col.order = c(\"est\", \"se\", \"std.est\", \"p\"), digits = 4, dv.labels = c(\"Treatment contrast<br> for gender\", \"Effect contrast<br> for gender\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; \">&nbsp;</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">Treatment contrast<br> for gender</th>\n<th colspan=\"3\" style=\"border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; \">Effect contrast<br> for gender</th>\n</tr>\n<tr>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; \">Predictors</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">std. Error</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">p</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">Estimates</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  \">std. Error</td>\n<td style=\" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  col7\">p</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">5.2577</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.6189</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;4.6274</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.6427</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">gender</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;19.7703</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.2853</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;9.8852</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.6427</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0695</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.1358</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.609</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.6640</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0851</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0270</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0795</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.734</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.4363</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0482</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">gender × x1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.4671</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.1702</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.7335</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0851</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">gender × x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.9267</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0963</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.4633</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0482</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">x1 × x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0056</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0116</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.629</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0124</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0059</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>0.036</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(gender × x1) × x2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0360</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0118</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.002</strong></td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.0180</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.0059</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  col7\"><strong>0.002</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">2000</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;\" colspan=\"3\">2000</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.738 / 0.737</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;\" colspan=\"3\">0.738 / 0.737</td>\n</tr>\n\n</table>\n\n`````\n:::\n:::\n\n\n- The `intercept` in model1 (treatment contrast) is the mean of `y` for *gender 0*\n- The `intercept` in model2 (effect contrast) is the mean of `y` for *all data*\n- All predictors in model1 without a `gender` term are effects for *gender 0* while the interactions with a `gender` term are effects for *gender 1*\n- All predictors in model2 without a `gender` term are effects *across gender* while the interactions with a `gender` term are the effects of `gender` (subtracted for *gender 0* and added for *gender 1*).\n- `gender` has a significant effect on `y` in both models\n- `x1`, `x2` and `x1*x2` only have a significant effect on `y` in model 2\n- All `gender` interactions are significant in both models.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}